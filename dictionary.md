# The local dictionary

## Overview
The local dictionary allows hardware abstraction by associating configuration values (that are specific to the hardware used)
to generic keys that are shared across all deployments. The configuration process, the queries and AnyLog commands that are
issued to each node reference the shared keys which are translated to the specific values which may be different on each node.  
For example: IPs and Ports, paths to files and directories are referenced by their assigned key names and translated on each node
to the appropriate value.  
Some entries in the dictionary represent default setups and configurations, and users can add or modify entries in
the dictionary as needed.  
For example, all the directories in the [default folders structure](getting%20started.md#local-directory-structure)
can be referenced by their keys, whereas in each deployment the physical location of the folders may be different.
Using this example, users can reference the path to the **archive directory** using the key **!archive_dir**, the
path to the **blobs directory** using the key **!blobs_dir** etc. allowing a shared configuration process whereas the 
physical path to each folder can be different on each node.


Users can include in the dictionary any key value pair that is needed to support a process, for example, maintain values
generated by data ingestion or represent a node state. For example, a user can declare a key called "disk_usage" and
configure the scheduler to update the value with percentage of free space every 15 seconds and include the value
(by referencing the name) in the processes monitoring the node state.

In addition, the dictionary is used to construct, maintain and update policies before their persistent storage in the shared metadata.

## Retrieve the dictionary values

The ```get dictionary``` command returns all the dictionary values.  
Usage:
```anylog
get dictionary
```

A single value is retrieved using the get command as follows:
```anylog
get !key_name
```
The **key name** prefixed by exclamation point following the get command retrieves the associated value.
Examples:  
* Retrieve the path to the archive directory using the following command: ```get !archive_dir```.
* Retrieve the external IP of the node using the following command:  ```get !external_ip```.

Notes:
* On the AnyLog CLI, it is sufficient to reference the value without the keyword ```get```. For example: ```!archive_dir```
and ```!external_ip``` (however issuing the commands through external apps like the AnyLog Remote CLI or cURL requires the ```get``` keyword).
* In the same manner system variables can be referenced by adding the dollar sign to the key. For example: ```$TMP``` or ```$HOME```.
* Paths and file names can be referenced by a key followed by a value. For example:  
```!anylog_path/AnyLog-Network/demo/ha_operator1.al``` will be transformed on each node to the relative path and file name 
  ```/AnyLog-Network/demo/ha_operator1.al``` within the physical path associated to the key ```!anyLog_path```.
  
### Example executing a script file
The following example executes a script file by calling the command ```process``` (followed by the file's path and name) on the AnyLog CLI. 
```anylog
process !anylog_path/AnyLog-Network/demo/ha_operator1.al
```
In the example above, the path prefix and file name are fixed: ```AnyLog-Network/demo/ha_operator1.al``` and the path
prefix is determined by the value assigned to the key ```anylog_path```.  
The following command retrieves the path prefix on a particular node (and below the command is the value return on a particular node):
```anylog
!anylog_path

'D:\Node3\al_files'
```
  
## Setting the dictionary values

Using the command ```set```, values are associated to keys as follows. 
A single value is retrieved using the get command as follows:
```anylog
set key_name = value
```
Examples:
```anylog
set config_file = ha_operator1.al
set default_tcp_port = 45223 
```
On the AnyLog CLI, users can ignore the ```set``` command and can assign values to keys in the following manner:
```anylog
config_file = ha_operator1.al
default_tcp_port = 45223 
```

