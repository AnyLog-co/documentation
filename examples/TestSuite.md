# Example Test suite

Documentation is available in the [test suites section](../test%20suites.md)

## Data Set

Below are 50 rows - file should be named: ```cos.pp_pm.json```
```anylog
{"monitor_id": "KPL ", "a_current": 249, "a_n_voltage": 737, "b_current": 250, "b_n_voltage": 740, "c_current": 246, "c_n_voltage": 736, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 99, "reactivepower": 644, "realpower": 5454, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DSP ", "a_current": 8, "a_n_voltage": 245, "b_current": 15, "b_n_voltage": 247, "c_current": 11, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 99, "reactivepower": 5, "realpower": 46, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DG2 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DG3 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DG4 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DG5 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DG6 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DF1 ", "a_current": 50, "a_n_voltage": 245, "b_current": 23, "b_n_voltage": 247, "c_current": 49, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 97, "reactivepower": 39, "realpower": 161, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DF2 ", "a_current": 21, "a_n_voltage": 245, "b_current": 18, "b_n_voltage": 246, "c_current": 21, "c_n_voltage": 244, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 94, "reactivepower": 28, "realpower": 80, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DF3 ", "a_current": 0, "a_n_voltage": 245, "b_current": 0, "b_n_voltage": 247, "c_current": 0, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DF4 ", "a_current": 75, "a_n_voltage": 245, "b_current": 46, "b_n_voltage": 247, "c_current": 79, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 52, "realpower": 272, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "DCT ", "a_current": 154, "a_n_voltage": 245, "b_current": 102, "b_n_voltage": 247, "c_current": 158, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 122, "realpower": 564, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CSP ", "a_current": 2, "a_n_voltage": 739, "b_current": 2, "b_n_voltage": 741, "c_current": 2, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 100, "reactivepower": 5, "realpower": 52, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CG7 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CG12", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CF1 ", "a_current": 16, "a_n_voltage": 739, "b_current": 18, "b_n_voltage": 741, "c_current": 13, "c_n_voltage": 737, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 100, "reactivepower": -34, "realpower": 348, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CF2 ", "a_current": 48, "a_n_voltage": 739, "b_current": 42, "b_n_voltage": 741, "c_current": 30, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 98, "reactivepower": 192, "realpower": 863, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CF3 ", "a_current": 8, "a_n_voltage": 739, "b_current": 11, "b_n_voltage": 741, "c_current": 18, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 99, "reactivepower": 46, "realpower": 265, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CDT ", "a_current": 22, "a_n_voltage": 739, "b_current": 25, "b_n_voltage": 741, "c_current": 33, "c_n_voltage": 737, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 126, "realpower": 566, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "CBT ", "a_current": 96, "a_n_voltage": 739, "b_current": 98, "b_n_voltage": 741, "c_current": 97, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 98, "reactivepower": 400, "realpower": 2114, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BG8 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BG9 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BG10", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BG11", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BF1 ", "a_current": 30, "a_n_voltage": 737, "b_current": 35, "b_n_voltage": 740, "c_current": 30, "c_n_voltage": 736, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 99, "reactivepower": 83, "realpower": 696, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BF2 ", "a_current": 36, "a_n_voltage": 738, "b_current": 34, "b_n_voltage": 739, "c_current": 35, "c_n_voltage": 737, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 11, "realpower": 772, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BF3 ", "a_current": 34, "a_n_voltage": 737, "b_current": 24, "b_n_voltage": 740, "c_current": 32, "c_n_voltage": 736, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 100, "reactivepower": -20, "realpower": 665, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BF4 ", "a_current": 21, "a_n_voltage": 738, "b_current": 22, "b_n_voltage": 740, "c_current": 22, "c_n_voltage": 736, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 100, "reactivepower": 20, "realpower": 476, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BCT ", "a_current": 96, "a_n_voltage": 738, "b_current": 99, "b_n_voltage": 740, "c_current": 97, "c_n_voltage": 736, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 98, "reactivepower": 401, "realpower": 2118, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "BSP ", "a_current": 1, "a_n_voltage": 738, "b_current": 1, "b_n_voltage": 740, "c_current": 1, "c_n_voltage": 736, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 100, "reactivepower": -1, "realpower": 17, "timestamp": "2025-12-22 00:00:26.023786"}
{"monitor_id": "KPL ", "a_current": 252, "a_n_voltage": 737, "b_current": 251, "b_n_voltage": 740, "c_current": 247, "c_n_voltage": 735, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 99, "reactivepower": 640, "realpower": 5493, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DG2 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DG3 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DG4 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DG5 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DG6 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DF1 ", "a_current": 52, "a_n_voltage": 245, "b_current": 27, "b_n_voltage": 246, "c_current": 51, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 97, "reactivepower": 40, "realpower": 174, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DF2 ", "a_current": 22, "a_n_voltage": 245, "b_current": 18, "b_n_voltage": 246, "c_current": 21, "c_n_voltage": 244, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 94, "reactivepower": 28, "realpower": 81, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DF3 ", "a_current": 0, "a_n_voltage": 245, "b_current": 0, "b_n_voltage": 247, "c_current": 0, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DF4 ", "a_current": 79, "a_n_voltage": 245, "b_current": 45, "b_n_voltage": 246, "c_current": 81, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 51, "realpower": 280, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "DCT ", "a_current": 158, "a_n_voltage": 245, "b_current": 105, "b_n_voltage": 247, "c_current": 161, "c_n_voltage": 245, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 125, "realpower": 580, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CSP ", "a_current": 2, "a_n_voltage": 740, "b_current": 2, "b_n_voltage": 741, "c_current": 2, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 100, "reactivepower": 5, "realpower": 52, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CG7 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CG12", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CF1 ", "a_current": 17, "a_n_voltage": 739, "b_current": 19, "b_n_voltage": 741, "c_current": 14, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 100, "reactivepower": -34, "realpower": 364, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CF2 ", "a_current": 48, "a_n_voltage": 739, "b_current": 43, "b_n_voltage": 740, "c_current": 30, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 193, "realpower": 876, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CF3 ", "a_current": 9, "a_n_voltage": 739, "b_current": 11, "b_n_voltage": 741, "c_current": 16, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 99, "reactivepower": 44, "realpower": 266, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CDT ", "a_current": 23, "a_n_voltage": 738, "b_current": 25, "b_n_voltage": 741, "c_current": 34, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 125, "realpower": 585, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "CBT ", "a_current": 98, "a_n_voltage": 739, "b_current": 100, "b_n_voltage": 741, "c_current": 97, "c_n_voltage": 738, "commsstatus": true, "energymultiplier": 1, "frequency": 6001, "powerfactor": 98, "reactivepower": 397, "realpower": 2141, "timestamp": "2025-12-22 00:00:30.865982"}
{"monitor_id": "BG8 ", "a_current": 0, "a_n_voltage": 0, "b_current": 0, "b_n_voltage": 0, "c_current": 0, "c_n_voltage": 0, "commsstatus": true, "energymultiplier": 1, "frequency": 6000, "powerfactor": 100, "reactivepower": 0, "realpower": 0, "timestamp": "2025-12-22 00:00:30.865982"}
```

## Queries generating the output file:

```anylog
# order by Max
run client () sql cos format = json and stat=true and test = true and  file = !test_dir\query_1.out and title = "Data set #1 - Sabetha Q1" SELECT monitor_id, AVG(powerfactor) as avg_powerfactor, MIN(powerfactor) as min_powerfactor, MAX(powerfactor) as max_powerfactor  FROM pp_pm  WHERE timestamp > '2025-01-01 00:00:00'  GROUP BY monitor_id  ORDER BY max_powerfactor desc
# order by Avg
run client () sql cos format = json and stat=true and test = true and  file = !test_dir\query_2.out and title = "Data set #1 - Sabetha Q2" SELECT monitor_id, AVG(powerfactor) as avg_powerfactor, MIN(powerfactor) as min_powerfactor, MAX(powerfactor) as max_powerfactor  FROM pp_pm  WHERE timestamp > '2025-01-01 00:00:00'  GROUP BY monitor_id  ORDER BY avg_powerfactor
# increments & order by Max
run client () sql cos format = json and stat=true and test = true and  file = !test_dir\query_3.out and title = "Data set #1 - Sabetha Q3" "SELECT increments(minute, 1, timestamp), monitor_id, min(timestamp), max(timestamp), MAX(b_n_voltage) as max_b_n_voltage FROM pp_pm WHERE insert_timestamp > '20250101' GROUP BY monitor_id  ORDER BY max_b_n_voltage"
# increments & order by AVG
run client () sql cos format = json and stat=true and test = true and  file = !test_dir\query_4.out and title = "Data set #1 - Sabetha Q4" "SELECT increments(minute, 1, timestamp), monitor_id, min(timestamp), max(timestamp), AVG(b_n_voltage) as max_b_n_voltage FROM pp_pm WHERE insert_timestamp > '20250101' GROUP BY monitor_id  ORDER BY max_b_n_voltage"
```

## Rerun and validate a single query

```anglog
test case where source = !test_dir/query_1.out and inform = stdout
```

## Rerun and validate all tests in a folder

```anglog
test suite where source = !test_dir/query_*.out and inform = stdout
```

